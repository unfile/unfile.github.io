(window.webpackJsonp=window.webpackJsonp||[]).push([[21,13,14],{189:function(t,e,n){var content=n(210);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("557b3900",content,!0,{sourceMap:!1})},209:function(t,e,n){"use strict";n(189)},210:function(t,e,n){var r=n(38)((function(i){return i[1]}));r.push([t.i,"/*purgecss start ignore*/\n.text-shadow{\n  text-shadow:0 0 3px #000\n}\n\n/*purgecss end ignore*/",""]),r.locals={},t.exports=r},214:function(t,e,n){"use strict";n.r(e);var r={props:{pct:{type:Number,default:0}}},o=(n(209),n(8)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"\n    w-full\n    bg-gray-100\n    rounded-full\n    overflow-hidden\n    shadow-inner\n    h-6\n  "},[n("div",{staticClass:"bg-blue-400 text-xs leading-none py-3 text-center",style:"width: "+t.pct+"%"}),t._v(" "),n("div",{staticClass:"text-center w-full -mt-6 font-semibold text-white text-shadow"},[t._v("\n    "+t._s(t.pct)+"%\n  ")])])}),[],!1,null,null,null);e.default=component.exports},254:function(t,e,n){"use strict";n.d(e,"d",(function(){return B})),n.d(e,"e",(function(){return Y})),n.d(e,"b",(function(){return Q})),n.d(e,"a",(function(){return X})),n.d(e,"c",(function(){return $}));var r=n(3),o=n(227),l=(n(9),n(13),n(125),n(215),n(14),n(195),n(196),n(197),n(198),n(24)),c=n(259),d=n(322),f=(n(123),n(52),n(55),n(261)),y=n(262),h=n.n(y),v=n(323),w=n(284),m=n.n(w),x=n(324),j=n(287),O=n(218),k=(n(212),n(288),n(235)),C=globalThis.fetch,S=(globalThis.Request,globalThis.Response,globalThis.Blob),R=globalThis.File,U=k.a;function E(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var T=5;class I{constructor(t){var{token:e,endpoint:n=new URL("https://api.web3.storage")}=t;this.token=e,this.endpoint=n}static headers(t){if(!t)throw new Error("missing token");return{Authorization:"Bearer ".concat(t),"X-Client":"web3.storage"}}static put(t,e){var n=arguments;return Object(r.a)((function*(){var{endpoint:r,token:o}=t,{onRootCidReady:l,onStoredChunk:c,maxRetries:d=T,wrapWithDirectory:f=!0,name:y}=n.length>2&&void 0!==n[2]?n[2]:{},h=new U;try{var{out:w,root:m}=yield Object(v.a)({input:Array.from(e).map((t=>({path:t.name,content:t.stream()}))),blockstore:h,wrapWithDirectory:f,maxChunkSize:1048576,maxChildrenPerNode:1024});l&&l(m.toString());var x=yield O.CarReader.fromIterable(w);return yield I.putCar({endpoint:r,token:o},x,{onStoredChunk:c,maxRetries:d,name:y})}finally{yield h.close()}}))()}static putCar(t,e){var n=arguments;return Object(r.a)((function*(){var{endpoint:l,token:c}=t,{name:d,onStoredChunk:y,maxRetries:v=T,decoders:w}=n.length>2&&void 0!==n[2]?n[2]:{},m=new URL("/car",l),x=I.headers(c);d&&(x=_(_({},x),{},{"X-Name":d}));var O=yield e.getRoots();if(null==O[0])throw new Error("missing root CID");if(O.length>1)throw new Error("too many roots");var k,R=O[0].toString(),U=new j.TreewalkCarSplitter(e,10485760,{decoders:w}),E=function(){var t=Object(r.a)((function*(t){var e,n=[],l=!1,c=!1;try{for(var d,f=Object(o.a)(t);l=!(d=yield f.next()).done;l=!1){var w=d.value;n.push(w)}}catch(t){c=!0,e=t}finally{try{l&&null!=f.return&&(yield f.return())}finally{if(c)throw e}}var j=new S(n,{type:"application/car"}),O=yield h()(Object(r.a)((function*(){var t=yield C(m.toString(),{method:"POST",headers:x,body:j}),e=yield t.json();if(!t.ok)throw new Error(e.message);if(e.cid!==R)throw new Error("root CID mismatch, expected: ".concat(R,", received: ").concat(e.cid));return e.cid})),{retries:v});return y&&y(j.size),O}));return function(e){return t.apply(this,arguments)}}(),P=Object(f.a)(3,E),L=!1,J=!1;try{for(var N,D=Object(o.a)(P(U.cars()));L=!(N=yield D.next()).done;L=!1)N.value}catch(t){J=!0,k=t}finally{try{L&&null!=D.return&&(yield D.return())}finally{if(J)throw k}}return R}))()}static get(t,e){return Object(r.a)((function*(){var{endpoint:n,token:l}=t,f=new URL("/car/".concat(e),n);return function(t){var e=Object.assign(t,{unixFsIterator:(n=Object(d.a)((function*(){if(!t.ok)throw new Error("Response was not ok: ".concat(t.status," ").concat(t.statusText,' - Check for { "ok": false } on the Response object before calling .unixFsIterator'));if(!t.body)throw new Error("No body on response");var e=new U;try{var n,r=!1,l=!1;try{for(var d,f=Object(o.a)(Object(x.a)(t.body,{blockstore:e}));r=!(d=yield Object(c.a)(f.next())).done;r=!1){var y=d.value;yield y}}catch(t){l=!0,n=t}finally{try{r&&null!=f.return&&(yield Object(c.a)(f.return()))}finally{if(l)throw n}}}finally{yield Object(c.a)(e.close())}})),function(){return n.apply(this,arguments)}),files:function(){var n=Object(r.a)((function*(){if(!t.ok)throw new Error("Response was not ok: ".concat(t.status," ").concat(t.statusText,' - Check for { "ok": false } on the Response object before calling .files'));var n,r=[],l=!1,c=!1;try{for(var d,f=Object(o.a)(e.unixFsIterator());l=!(d=yield f.next()).done;l=!1){var y=d.value;if("directory"!==y.type){var h=yield P(y);r.push(h)}}}catch(t){c=!0,n=t}finally{try{l&&null!=f.return&&(yield f.return())}finally{if(c)throw n}}return r}));function l(){return n.apply(this,arguments)}return l}()});var n;return e}(yield C(f.toString(),{method:"GET",headers:I.headers(l)}))}))()}static delete(t,e){return Object(r.a)((function*(){var{endpoint:n,token:r}=t;throw console.log("Not deleting",e,n,r),Error(".delete not implemented yet")}))()}static status(t,e){return Object(r.a)((function*(){var{endpoint:n,token:r}=t,o=new URL("/status/".concat(e),n),l=yield C(o.toString(),{method:"GET",headers:I.headers(r)});if(404!==l.status){if(!l.ok)throw new Error(l.statusText);return l.json()}}))()}static list(t){var{before:e=(new Date).toISOString(),maxResults:n=1/0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)((function*(){var r,l=0,d=n>100?100:n,f=!1,y=!1;try{for(var h,v=Object(o.a)(function(t,e,n){return N.apply(this,arguments)}((function(t,e){var{endpoint:n,token:r}=t,{before:o,size:l}=e,c=new URLSearchParams({before:o,size:l.toString()}),d=new URL("/user/uploads?".concat(c),n);return C(d.toString(),{method:"GET",headers:_(_({},I.headers(r)),{},{"Access-Control-Request-Headers":"Link"})})}),t,{before:e,size:d}));f=!(h=yield Object(c.a)(v.next())).done;f=!1){var w=h.value;if(!w.ok)throw new Error("".concat(w.status," ").concat(w.statusText));var m=yield Object(c.a)(w.json());for(var x of m){if(++l>n)return;yield x}}}catch(t){y=!0,r=t}finally{try{f&&null!=v.return&&(yield Object(c.a)(v.return()))}finally{if(y)throw r}}}))()}put(t,e){return I.put(this,t,e)}putCar(t,e){return I.putCar(this,t,e)}get(t){return I.get(this,t)}delete(t){return I.delete(this,t)}status(t){return I.status(this,t)}list(t){return I.list(this,t)}}function P(t){return L.apply(this,arguments)}function L(){return(L=Object(r.a)((function*(t){var e,{content:content,path:path,cid:n}=t,r=[],l=!1,c=!1;try{for(var d,f=Object(o.a)(content());l=!(d=yield f.next()).done;l=!1){var y=d.value;r.push(y)}}catch(t){c=!0,e=t}finally{try{l&&null!=f.return&&(yield f.return())}finally{if(c)throw e}}var h=new R(r,J(path));return Object.assign(h,{cid:n.toString()})}))).apply(this,arguments)}function J(t){var e=t.indexOf("/");return-1===e?t:t.substring(e+1)}function N(){return(N=Object(d.a)((function*(t,e,n){var r=yield Object(c.a)(t(e,n));yield r;for(var link=m()(r.headers.get("Link")||"");link&&link.next;)r=yield Object(c.a)(t(e,link.next)),yield r,link=m()(r.headers.get("Link")||"")}))).apply(this,arguments)}var D=n(216),z=n(225),F=n(289);function B(t){return M.apply(this,arguments)}function M(){return(M=Object(r.a)((function*(t){var e,n=Object(F.create)({url:"https://dweb.link/api/v0"}),r=[],l=!1,c=!1;try{for(var d,f=Object(o.a)(n.ls(t));l=!(d=yield f.next()).done;l=!1){var link=d.value;r.push(link)}}catch(t){c=!0,e=t}finally{try{l&&null!=f.return&&(yield f.return())}finally{if(c)throw e}}return console.log(r),r}))).apply(this,arguments)}function A(){return new I({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDZFMTE3RDc3YjYzNUFkMzU3OURFQUYxODUyZjE1NjBkYUFDZGE1NjIiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2MzA4MjI5MjQ3MzAsIm5hbWUiOiJEZUJveCJ9.J8JNPVrd94C0MSAiyavSbjKRQAYFEJQDkq36cwjNUZU"})}function Y(t,e,n,r,o,l){return Z.apply(this,arguments)}function Z(){return(Z=Object(r.a)((function*(t,e,caption,n,r,o){var l=z.a.generate(20),c={files:{},caption:caption,addresses:n},d=[];for(var f of Object.keys(t))c.files[t[f].file.name]=t[f].originalName,d.push(t[f].file);var y=Object(D.d)("metadata.json",c),h=new File([String(r)],"VERSION",{type:"text/plain"});d.push(h);var v=yield Object(z.c)(y,e,!0);d.push(v.file);var w=A();console.log("> ðŸ¤– calculating content ID for files");var m=d.map((t=>t.size)).reduce(((a,b)=>a+b),0),x=0;return yield w.put(d,{name:l,onRootCidReady:t=>{console.log("> ðŸ”‘ locally calculated Content ID: ".concat(t," ")),console.log("> ðŸ“¡ sending files to web3.storage ")},onStoredChunk:t=>{console.log("> ðŸ›° sent ".concat(t.toLocaleString()," bytes to web3.storage"));var e=100*(x+=t)/m;console.log("Uploading... ".concat(e.toFixed(2),"% complete")),o(Number(e.toFixed(1)))}})}))).apply(this,arguments)}function Q(t){return W.apply(this,arguments)}function W(){return(W=Object(r.a)((function*(t){var e=Object(D.e)(t,"metadata.json.enc"),n=yield fetch(e);if(!n.ok)throw new Error("error fetching image metadata: [".concat(n.status,"] ").concat(n.statusText));return yield n.blob()}))).apply(this,arguments)}function X(t){return G.apply(this,arguments)}function G(){return(G=Object(r.a)((function*(t){var e=A(),n=yield e.status(t);return console.log(n),n}))).apply(this,arguments)}function $(t,e,n,r){return V.apply(this,arguments)}function V(){return(V=Object(r.a)((function*(t,e,n,r){var o=Object(D.e)(t,e),l=yield fetch(o),c=l.body.getReader(),d=l.headers.get("Content-Length");console.log(d);for(var f=0,y=[];;){var{done:h,value:v}=yield c.read();if(h)break;if(y.push(v),f+=v.length,n)n(r,f/d*100)}var w=new Uint8Array(f),m=0;for(var x of y)w.set(x,m),m+=x.length;return new Blob([w])}))).apply(this,arguments)}},290:function(t,e){},294:function(t,e){},299:function(t,e){},300:function(t,e){},320:function(t,e,n){"use strict";n.r(e);var r={data:()=>({copyBtnText:"Copy"}),props:{password:{type:String},pct:{type:Number},cid:{type:String},caption:{type:String}},computed:{baseUrl:()=>window.location.origin,link(){return"/d/".concat(this.cid)},combinedLink(){return this.baseUrl+this.link+"?key=".concat(this.password)}},methods:{copyToClipboard(){navigator.clipboard.writeText(this.combinedLink),this.copyBtnText="Copied!",setTimeout((()=>{this.copyBtnText="Copy"}),1e3)},saveLink(){var t=localStorage.getItem("unfile-uploads");t&&(t=JSON.parse(t)||[]),t.unshift({caption:this.caption||"",link:this.link+"?key=".concat(this.password)}),localStorage.setItem("unfile-uploads",JSON.stringify(t)),this.$router.push("/myfiles")}}},o=n(8),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sm:max-w-lg w-full py-10 px-10 bg-white rounded-xl z-10 shadow-xl"},[n("transition",{attrs:{"enter-active-class":"transition-all delay-500 duration-300 ease-out","leave-active-class":"transition-all duration-500 ease-in","enter-class":"opacity-0 transform scale-0","enter-to-class":"opacity-100 transform scale-100","leave-class":"opacity-100 transform scale-100","leave-to-class":"opacity-0 transform scale-0"}},[t.cid?n("div",{key:"result"},[n("h4",{staticClass:"text-md font-bold text-gray-500 tracking-wide mb-3"},[t._v("\n        Your Link:\n      ")]),t._v(" "),n("div",{staticClass:"\n          flex\n          items-center\n          p-4\n          space-x-4\n          border-2 border-gray-300\n          rounded-lg\n        "},[n("div",{staticClass:"w-full text-base border-r-2 pr-3 select-all break-all"},[t._v("\n          "+t._s(t.baseUrl)+t._s(t.link)),n("span",{staticClass:"text-red-500"},[t._v("?key="+t._s(t.password))])]),t._v(" "),n("div",{staticClass:"flex-shrink-0"},[n("button",{staticClass:"\n              p-2\n              bg-blue-500\n              text-gray-100\n              rounded-md\n              focus:shadow-outline\n              hover:bg-blue-600\n              shadow-lg\n              cursor-pointer\n              transition\n              ease-in\n              duration-300\n            ",on:{click:t.copyToClipboard}},[t._v("\n            "+t._s(t.copyBtnText)+"\n          ")])])]),t._v(" "),n("div",{staticClass:"flex justify-center"},[n("button",{staticClass:"\n            mt-10\n            flex\n            justify-center\n            py-2\n            px-4\n            tracking-wide\n            font-semibold\n            rounded-xl\n            bg-blue-500\n            text-gray-100\n            focus:outline-none\n            focus:shadow-outline\n            hover:bg-blue-600\n            shadow-lg\n            cursor-pointer\n            transition\n            ease-in\n            duration-300\n          ",on:{click:t.saveLink}},[t._v("\n          Save Link in Browser Storage\n        ")])])]):n("div",{key:"progress"},[n("div",{staticClass:"text-center mb-5"},[n("h4",{staticClass:"text-sm font-bold text-gray-400 tracking-wide"},[t._v("\n          Upload in progress..\n        ")])]),t._v(" "),n("ProgressBar",{staticClass:"my-10 max-w-sm mx-auto",attrs:{pct:t.pct}})],1)])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ProgressBar:n(214).default})},614:function(t,e,n){"use strict";n.r(e);var r=n(3),o=n(254),l={head:()=>({title:"UnFile - Upload Your Files"}),data:()=>({showProgress:!1,password:"",pct:0,cid:"",caption:""}),methods:{startUpload(data){var t=this;return Object(r.a)((function*(){t.showProgress=!0,t.caption=data.caption||"";var e=yield Object(o.e)(data.files,data.password,data.caption,data.addresses,t.$config.clientVersion,t.progressCallback);e&&(t.pct=100,t.cid=e)}))()},progressCallback(t){console.log(t),this.pct=t},updatePassword(t){this.password=t}}},c=n(8),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"\n    md:py-12\n    px-4\n    sm:px-6\n    lg:px-8\n    relative\n    flex\n    items-center\n    justify-center\n    flex-1\n  "},[n("transition",{attrs:{"enter-active-class":"transition-all delay-300 duration-300 ease","leave-active-class":"transition-all duration-300 ease","enter-class":"opacity-0 transform -translate-x-full","enter-to-class":"opacity-100 transform -translate-x-0","leave-class":"opacity-100 transform -translate-x-0","leave-to-class":"opacity-0 transform -translate-x-full"}},[t.showProgress?n("Progress",{attrs:{password:t.password,pct:t.pct,cid:t.cid,caption:t.caption}}):n("UploadBox",{attrs:{password:t.password},on:{upload:t.startUpload,passwordCreated:t.updatePassword}})],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UploadBox:n(608).default,Progress:n(320).default})}}]);